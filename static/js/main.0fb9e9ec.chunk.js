(this["webpackJsonpdsci-ui"]=this["webpackJsonpdsci-ui"]||[]).push([[0],{34:function(e,t,n){e.exports=n(46)},39:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(7),l=n.n(i),r=(n(39),n(6)),c=n(20),u=n(11),s=o.a.createContext(),m=n(10),g=n.n(m),d=n(76),p={nonEmpty:{regx:/.+/g,message:"Can't be empty"},email:{regx:/.+@.+\..+/g,message:"Invalid email"}},f=function(e,t){var n=null;return null===e.match(p[t].regx)&&(n=p[t].message),n};function v(e){var t=Object(a.useState)(null===e.text?null:f(e.text,e.pattern)),n=Object(r.a)(t,2),i=n[0],l=n[1],c=Object(a.useState)(e.text),u=Object(r.a)(c,2),s=u[0],m=u[1];return Object(a.useEffect)((function(){m(e.text)}),[e.text]),o.a.createElement("div",{className:"formElement"},o.a.createElement(d.a,{error:null!==i,label:e.label?e.label:"",value:null===s?"":s,onChange:function(t){var n=t.target.value,a=f(n,e.pattern);e.onChange(null===a?n:null),l(a)},variant:"outlined",helperText:i}))}v.defaultProps={text:null,label:null,pattern:"nonEmpty"};var b=v,E=n(77),h=n(75),w={EmailInputBox:function(e){return o.a.createElement(b,Object.assign({text:e.value,pattern:"email",onChange:e.onValueChange},e.options))},InputBox:function(e){return o.a.createElement(b,Object.assign({text:e.value,pattern:"nonEmpty",onChange:e.onValueChange},e.options))},Text:function(e){g.a.templateSettings.interpolate=/{{([\s\S]+?)}}/g;var t=g.a.template(e.options.text)(e.globalValue);return o.a.createElement("div",{className:"ele"},t)},Question:function(e){return o.a.createElement("div",{className:"ele"},e.options.text)},YesNo:function(e){var t=Object(a.useState)(null!==e.value&&e.value),n=Object(r.a)(t,2),i=n[0],l=n[1],c=Object(a.useState)(null!==e.value&&!e.value),u=Object(r.a)(c,2),s=u[0],m=u[1];return o.a.createElement("div",{className:"ele"},o.a.createElement("span",null,"Yes"),"\xa0",o.a.createElement("input",{type:"radio",checked:i,onChange:function(){l(!0),m(!1),e.onValueChange(!0)}}),"\xa0",o.a.createElement("span",null,"No"),"\xa0",o.a.createElement("input",{type:"radio",checked:s,onChange:function(){m(!0),l(!1),e.onValueChange(!1)}}))},YesNoText:function(e){var t=Object(a.useState)(null!==e.value&&e.value),n=Object(r.a)(t,2),i=n[0],l=n[1],c=Object(a.useState)(null!==e.value&&!e.value),u=Object(r.a)(c,2),s=u[0],m=u[1];return o.a.createElement("div",{className:"ele col"},o.a.createElement("div",{className:"box",style:{background:!0===i?"grey":null},onClick:function(){l(!0),m(!1),e.onValueChange(!0)}},"Yes"),o.a.createElement("div",{className:"box",style:{background:!0===s?"grey":null},onClick:function(){m(!0),l(!1),e.onValueChange(!1)}},"No"))},Bop:function(e){var t=e.options.options,n=Object(a.useState)(e.value),i=Object(r.a)(n,2),l=i[0],c=i[1];return o.a.createElement("div",{className:"ele col"},t.map((function(t,n){return o.a.createElement("div",{key:n,className:"box",style:{background:l===t?"grey":null},onClick:function(){!function(t){c(t),e.onValueChange(t)}(t)}},t)})))},GoogleAssist:function(e){var t=Object(a.useRef)(null),n=e.options.exportNames;Object(a.useEffect)((function(){var a=new window.google.maps.places.Autocomplete(t.current,{types:["establishment"],componentRestrictions:{country:["us"]}});a.setFields(["address_components","name","rating","place_id","photos","formatted_address","adr_address"]);var o=a.addListener("place_changed",(function(){var t=a.getPlace();t.photosUrl=(t.photos||[]).map((function(e){return e.getUrl({maxHeight:100})}));var o={};for(var i in n)o[n[i]]=g.a.get(t,i,null);e.onGlobalValueChange(o)}));return function(){window.google.maps.event.removeListener(o),window.google.maps.event.clearInstanceListeners(a)}}));return o.a.createElement("div",{className:"formElement"},o.a.createElement("input",{ref:t,type:"text"}),o.a.createElement("button",{className:"smallMarginLeft",onClick:function(){for(var a in t.current.value="",n)e.onGlobalValueChange(n[a],null);t.current.focus()}},"Search"))},GoogleImages:function(e){return o.a.createElement("div",null,null===e.value?null:e.value.slice(0,3).map((function(e,t){return o.a.createElement("img",{key:t,src:e,alt:""})})))},Journey:function(e){var t=Object(a.useState)(null===e.value?0:e.value.currentPage),n=Object(r.a)(t,2),i=n[0],l=n[1],c=Object(a.useState)(null),s=Object(r.a)(c,2),m=s[0],d=s[1],p=function(){var t=e.options.pages[i];return t.validate.reduce((function(n,a){return null===g.a.get(e.value[t.name],a.name,null)&&n.push(a.errorMessage),n}),[])};return o.a.createElement("div",null,o.a.createElement(E.a,{separator:">"},e.options.pages.map((function(e,t){return o.a.createElement(h.a,{key:t,color:i===t?"textPrimary":"textSecondary"},e.title)}))),null===m?null:m.map((function(e,t){return o.a.createElement("h5",{key:t},e)})),e.options.pages.map((function(t,n){return o.a.createElement("div",{key:n,className:n!==i?"hide":null},o.a.createElement(I,{init:null===e.value?null:e.value[t.name],content:t.content,onChange:function(n){!function(t,n){var a=null===e.value?{}:Object(u.a)({},e.value);a[n]=t,e.onValueChange(a)}(n,t.name)}}))})),o.a.createElement("button",{onClick:function(){var t=p();if(t.length)d(t);else if(d(null),i>0){var n=i-1;l(n),e.onValueChange(Object(u.a)({},e.value,{},{currentPage:n}))}}},"Back"),"\xa0\xa0",o.a.createElement("button",{onClick:function(){var t=p();if(t.length)d(t);else if(d(null),i<e.options.pages.length-1){var n=i+1;l(n),e.onValueChange(Object(u.a)({},e.value,{},{currentPage:n}))}}},"Next"))},Summary:function(e){var t=Object(a.useState)(null===e.value?null:e.value.content),n=Object(r.a)(t,2),i=n[0],l=n[1],c=Object(a.useState)(null!==e.value&&e.value.collapsed),u=Object(r.a)(c,2),s=u[0],m=u[1];e.onContentValueUpdate((function(e){l(e)}));var g=function(){var t=!s;m(t),e.onValueChange({content:i,collapsed:t})};return o.a.createElement("div",null,o.a.createElement("div",null,s?null!==i?o.a.createElement("div",null,o.a.createElement("div",null,e.options.summary.map((function(e,t){return o.a.createElement("div",{key:t},e.name,"\xa0:\xa0",i[e.name])}))),o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){g()}},"Edit"))):null:e.content),o.a.createElement("button",{onClick:function(){g()}},"Save"))}},y=n(29),O=function(e){return"function"===typeof e?e:"string"===typeof e?function(t){var n=new y.Parser;for(var a in n.setFunction("LENGTH",(function(e){return e[0].length})),t)n.setVariable(a,t[a]);var o=n.parse(e);return null!==o.error&&console.error("Something went wrong while parsing formula",n),o.result}:function(){return!0}};function x(e){var t=e.item,n=e.Widget,i=t.name,l=O(t.showOn),c=Object(a.useContext)(s),m=c.getKeys(),g=Object(a.useState)(m[i]),d=Object(r.a)(g,2),p=d[0],f=d[1],v=Object(a.useState)(m),b=Object(r.a)(v,2),E=b[0],h=b[1],w=Object(a.useState)(l(m)),y=Object(r.a)(w,2),x=y[0],C=y[1],S=null;Object(a.useEffect)((function(){var e=c.onChange((function(e){f(e[i]),h(Object(u.a)({},e)),C(l(e))}));return function(){c.deregister(e)}}));return x?o.a.createElement(n,{value:p,globalValue:E,onValueChange:function(e){c.setKey(i,e)},onGlobalValueChange:function(e){c.setKeys(e)},onContentValueUpdate:function(e){S=e},content:t.hasOwnProperty("content")?o.a.createElement(I,{content:t.content,init:null===p?null:p.content,onChange:function(e){S(e)}}):null,options:t.options}):null}function C(e){var t=e.item,n=e.Widget,i=e.index,l=Object(a.useContext)(s),c=Object(a.useState)(l.getList()[i]),u=Object(r.a)(c,2),m=u[0],g=u[1];Object(a.useEffect)((function(){var e=l.onChange((function(e){g(e[i])}));return function(){l.deregister(e)}}));return o.a.createElement(n,{value:m,onValueChange:function(e){l.setEle(e,i)},options:t.options})}var S=function(e){var t={},n=function(n){var a=e[n];t[n]=function(e){return!0===e.isRepeatable?o.a.createElement(C,{item:e,Widget:a}):o.a.createElement(x,{item:e,Widget:a})}};for(var a in e)n(a);return t},j=g.a.extend(function(e){var t={},n=function(n){var a=e[n];t[n]=function(e){return o.a.createElement(I,{content:a,init:e.value,onChange:e.onValueChange})}};for(var a in e)n(a);return S(t)}({GooglePlaces:{items:[{widget:"GoogleAssist",name:"googleAssist",options:{exportNames:{place_id:"googlePlaceId",name:"name",formatted_address:"address",photosUrl:"googleImages",rating:"googleRating"}}},{widget:"Text",name:"googleRating",options:{text:"User rating : {{googleRating}} of 5"},showOn:"IF(address=NULL, FALSE, TRUE)"},{widget:"GoogleImages",name:"googleImages",showOn:"IF(address=NULL, FALSE, TRUE)"},{widget:"InputBox",name:"name",options:{label:"Building name"},showOn:"IF(address=NULL, FALSE, TRUE)"},{widget:"InputBox",name:"address",options:{label:"Address"},showOn:"IF(address=NULL, FALSE, TRUE)"}]},BuildingList:{container:"demark",items:[{widget:"GooglePlaces",name:"building"}]},BuildingWidget:{items:[{content:{items:[{name:"address",widget:"Summary",content:{items:[{content:{container:"col",items:[{name:"streetAddress",widget:"InputBox",options:{label:"Street Address"}},{name:"suite",widget:"InputBox",options:{label:"Suite"}},{name:"city",widget:"InputBox",options:{label:"City"}}]}},{content:{container:"col",items:[{name:"state",widget:"InputBox",options:{label:"State"}},{name:"zipCode",widget:"InputBox",options:{label:"Zip Code"}}]}}]},options:{summary:[{name:"streetAddress",label:"Street Address"},{name:"suite",label:"Suite"},{name:"city",label:"City"},{name:"zipCode",label:"Zipcode"}],validate:{}}}]}}]},LocationWidget:{items:[{name:"Location",widget:"InputBox",options:{label:"Location"}},{name:"Building",widget:"BuildingWidget",options:{},isRepeatable:!0}]},LOBSelection:{items:[{widget:"Text",options:{text:"Do you own this building?"},name:"ownBuilding"},{widget:"YesNo",name:"doesOwnBuilding"},{widget:"Text",options:{text:"What policy do you want to buy?"},name:"policySelectionQuestion"},{widget:"Bop",name:"policyName",options:{options:["Business Owner Policy","Worker Compensation","Building Policy"]}},{widget:"Text",options:{text:"Is your building close to police station?"},showOn:"IF(policyName='Business Owner Policy', TRUE, FALSE)"},{widget:"YesNoText",name:"CloseToPoliceStation",showOn:"IF(policyName='Business Owner Policy', TRUE, FALSE)"}]}}),S(w));function B(e){var t=Object(a.useContext)(s),n=e.item.name,i=Object(a.useState)(t.getKeys()[n]),l=Object(r.a)(i,2),u=l[0],m=l[1],g=[],d={getList:function(){return u},setEle:function(e,a){var o;u[a]=e,g.forEach((function(e){return e(u)})),o=u,t.setKey(n,o)},onChange:function(e){return(g=[].concat(Object(c.a)(g),[e])).length-1},deregister:function(e){g[e]=function(){}}};return o.a.createElement(o.a.Fragment,null,u.map((function(t,n){return o.a.createElement(s.Provider,{key:n,value:d},o.a.cloneElement(e.Widget,{index:n}))})),o.a.createElement("div",{className:"col spread"},o.a.createElement("button",{onClick:function(){m([].concat(Object(c.a)(u),[null]))}},"Add")))}function N(e){return o.a.createElement("div",{className:e.content.hasOwnProperty("container")?e.content.container:null},e.content.items.map((function(e,t){return o.a.createElement("div",{key:t},e.hasOwnProperty("widget")?function(e){var t=j[e.widget](e);return e.isRepeatable?o.a.createElement(B,{Widget:t,item:e}):t}(e):(n=e.content,o.a.createElement(N,{content:n})));var n})))}var k=N,L=function(e){var t={};return function e(n){n.items.forEach((function(n){n.widget&&n.name&&(t[n.name]=n.isRepeatable?[null]:n.hasOwnProperty("defaultValue")?n.defaultValue:null),n.content&&!n.widget&&e(n.content)}))}(e),t};var I=function(e){var t=g.a.extend(L(e.content),e.init),n=[];return o.a.createElement(s.Provider,{value:{getKeys:function(){return t},setKeys:function(a){t=Object(u.a)({},t,{},a),n.forEach((function(e){return e(t)})),e.onChange(t)},setKey:function(a,o){t[a]=o,n.forEach((function(e){return e(t,a)})),e.onChange(t)},onChange:function(e){return(n=[].concat(Object(c.a)(n),[e])).length-1},deregister:function(e){n[e]=function(){}}}},o.a.createElement(k,{content:e.content}))},P=(n(45),[{container:"row demark",items:[{name:"LocationWithBuildings",widget:"LocationWidget",isRepeatable:!0}]},{container:"row demark",items:[{widget:"Text",options:{text:"Welcome to this JSON Form builder"},name:"intro"},{widget:"Text",options:{text:"Where is your house located?"}},{widget:"InputBox",name:"Location",isRepeatable:!0},{widget:"InputBox",name:"Default",defaultValue:"10"},{widget:"Text",options:{text:"Do you own this house?"},name:"ownBuilding"},{widget:"YesNo",name:"DoesOwnBuilding"},{widget:"Text",options:{text:"What option do you want to choose"},name:"policySelectionQuestion"},{widget:"Bop",name:"policyName",options:{options:["Option A","Option B","Option C"]}},{widget:"Text",options:{text:"Is your building close to police station?"},showOn:"IF(policyName='Option A', TRUE, FALSE)"},{widget:"YesNoText",name:"CloseToPoliceStation",showOn:"IF(policyName='Option A', TRUE, FALSE)"}]},{container:"row",items:[{name:"Journey1",widget:"Journey",options:{pages:[{name:"Page1",content:{container:"row",items:[{widget:"InputBox",name:"a"},{widget:"InputBox",name:"b"}]},validate:[{name:"a",errorMessage:"a Cannot be empty"},{name:"b",errorMessage:"b Cannot be empty"}]},{name:"Page2",content:{container:"row",items:[{widget:"InputBox",name:"c"},{widget:"InputBox",name:"d"}]},validate:[{name:"c",errorMessage:"Cannot be empty"},{name:"d",errorMessage:"Cannot be empty"}]}]}}]},{container:"row demark",items:[{name:"LocationWithBuildings",widget:"LocationWidget",isRepeatable:!0}]},{items:[{widget:"Journey",name:"journey",options:{pages:[{title:"Business Details",name:"Page1",content:{container:"demark",items:[{widget:"GooglePlaces",name:"googlePlaces"}]},validate:[{name:"googlePlaces.name",errorMessage:"Business name cannot be empty"}]},{title:"Select LOB",name:"Page2",content:{container:"demark",items:[{name:"lobSelection",widget:"LOBSelection"}]},validate:[]},{title:"Buildings",name:"Page3",content:{container:"demark",items:[{name:"buildingList",widget:"BuildingList",isRepeatable:!0}]},validate:[]},{title:"Locations",name:"Page4",content:{container:"demark",items:[{name:"locationWithBuildings",widget:"LocationWidget",isRepeatable:!0}]},validate:[]}]}}]}]);window.sessionStorage.getItem("data");var T=function(){var e=null,t=Object(a.useState)(P[0]),n=Object(r.a)(t,2),i=n[0],l=n[1];return o.a.createElement("div",{className:"app"},o.a.createElement("div",{className:"appContainer"},o.a.createElement("h1",{className:"center"},"JSON Form builder"),o.a.createElement("h4",null,"The forms below are auto-generated using a json configuration file. Select a sample config file \xa0",o.a.createElement("select",{onChange:function(e){l(P[parseInt(e.target.value)])}},P.map((function(e,t){return o.a.createElement("option",{key:t,value:t},"Sample form ",t+1)}))),"\xa0",o.a.createElement("a",{href:"javascript:void(0)",onClick:function(){alert(JSON.stringify(i,null,2))}},"Show config")),o.a.createElement("div",{className:"mediumMarginBottom"},"Enter some data in the form below and click ",o.a.createElement("b",null,"Test Exported From Form")," to see the JSON data"),o.a.createElement(I,{content:i,init:{},onChange:function(t){e=t}}),o.a.createElement("button",{onClick:function(){if(alert(JSON.stringify(e,null,2)),null!==e){var t=JSON.stringify(e);window.sessionStorage.setItem("data",t)}}},"Test Exported From Form")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[34,1,2]]]);
//# sourceMappingURL=main.0fb9e9ec.chunk.js.map